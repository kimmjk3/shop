<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="shop/layout/basic">

<th:block layout:fragment="title">
	<title>게시물 보기</title>
</th:block>

<th:block layout:fragment="content">
	<main id="main">
		<section id="about" class="about">
			<div class="container" data-aos="fade-up">
				<div class="section-title">
					<h2>상품</h2>
				</div>

				<div class="row">
					<div style="width: 70%; margin-left: auto; margin-right: auto;">
						<form th:object="${product}">
							<table class="table table-bordered" style="text-align: center; border: 3px solid #dddddd;">
								<thead>
									<tr>
										<td colspan="4">상품</td>
									</tr>
								</thead>
								<tbody>
									<tr>
                                        <td style="width: 20%; background-color: #eeeeee;">등록인</td>
                                        <td style="width: 30%;" th:text="*{userID}"></td>
										<td style="width: 20%; background-color: #eeeeee;">카테고리</td>
										<td th:if="*{productCategory} == 1">키보드</td>
										<td th:if="*{productCategory} == 2">마우스</td>
									</tr>
									<tr>
										<td style="width: 20%; background-color: #eeeeee;">상품명</td>
										<td style="width: 30%;" th:text="*{productName}"></td>
										<td style="width: 20%; background-color: #eeeeee;">상품가격</td>
										<td style="width: 30%;" th:text="*{productPrice}"></td>
									</tr>
									<tr>
										<td style="width: 20%; background-color: #eeeeee;">상태</td>
										<td th:if="*{productState} == 1">준비중</td>
										<td th:if="*{productState} == 2">판매중</td>
										<td style="width: 20%; background-color: #eeeeee;">등록일</td>
										<td style="width: 30%;" th:text="*{productInputDate}"></td>
									</tr>
                                    <tr>
                                        <td style="width: 20%; background-color: #eeeeee;">재고</td>
                                        <td style="width: 30%;" th:text="*{productStock}"></td>
                                        <td style="width: 20%; background-color: #eeeeee;">조회수</td>
                                        <td style="width: 30%;" th:text="*{productHits}"></td>
                                    </tr>
								</tbody>
							</table>
						</form>

						<div style="text-align: right;">
							<button type="button" class="btn btn-danger" th:if="${session.userID != null}" th:onclick="deleteProduct([[ ${product.productNumber} ]])">삭제하기</button>
							<a th:href="@{/shop/productmanagement.do}" class="btn btn-info">뒤로가기</a>
						</div>
					</div>
				</div>

			</div>
		</section>
	</main>
</th:block>

<th:block layout:fragment="script">
	<script th:inline="javascript">
		/*<![CDATA[*/

		console.log("${session.userLo}");

		function deleteProduct(productNumber) {

			if (confirm(productNumber + "번 상품을 삭제할까요?")) {
				var uri = /*[[ @{/shop/productdelete.do} ]]*/null;
				var html = "";

				html += '<form name="dataForm" action="'+uri+'" method="post">';
				html += '<input type="hidden" name="productNumber" value="'+productNumber+'" />';
				html += '</form>';

				$("body").append(html);
				document.dataForm.submit();
			}
		}
		/*[- end of function -]*/
		/*]]>*/
	</script>
</th:block>

</html>